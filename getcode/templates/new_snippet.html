<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create a new Snippet</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/styles.css">
</head>

<body>

    <nav class="navbar navbar-expand-sm bg-dark">
        <!-- Links -->
        <ul class="nav navbar">
            <form action="/" methods="post" class="form-inline ml-auto">
                <input type="text" class="form-control mr-sm-2" placeholder="Search">
                <button type="submit" class="btn btn-outline-success">Search</button>
            </form>
        </ul>
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="/dashboard">Dashboard</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/logout">Logout</a>
                <!-- TODO Change this to url_for -->
            </li>
        </ul>
    </nav>

    <div class="container">
        {% if edit %}
        <form action="{{ url_for('snippet_view.create_new_snippet',id=id) }}" method="POST">
            {%else %}
            <form action="{{ url_for('snippet_view.create_new_snippet') }}" method="POST">
                {%endif%}
                <div class="form-group green-border-focus">
                    <label for='title'>Title</label>
                    <input required class='form-control' type="text" name='title' value="{% if title %}{{title}}{% endif %}" placeholder="Title">
                </div>
                <div class="form-group green-border-focus">
                    <label for="desc">Description</label>
                    <textarea id="textbox" name="desc" placeholder="Description" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'>{% if desc %}{{desc}}{%endif%}</textarea>
                </div>
                <div class="form-group green-border-focus">
                    <label for="code">Enter your code</label>
                    <textarea required id='textbox' name="code" placeholder="Code" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'>{% if code %}{{code}}{%endif%}</textarea>
                </div>
                <select class='mb-5' name="visibility">
                <option name='private'>Private</option>
                <option name='public'>Public</option>
            </select>

                <br>
                <button type="submit" class="btn btn-primary" formaction="{{ url_for('snippet_view.preview_new_snippet')}}">Preview snippet</button>
                <button type="submit" class="btn btn-primary">Create Snippet</button>

            </form>

            <div class="mt-5">
                {% if code%}
                <div>{{ desc|safe }}</div>
                <div class="mt-5">
                    <pre><code>{{ code }}</code></pre> </div>
                {% endif %}
            </div>

    </div>
</body>

</html>